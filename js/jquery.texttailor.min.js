/*! TextTailor.js - 0.1.0 - 2014-09-17 | https://github.com/jpntex/TextTailor.js | Copyright (c) 2014 JoÃ£o Teixeira (@jpntex) | MIT License */
!function(a,b){"use strict";function c(b,c){this.el=b,this.options=a.extend({},d,c),this.init()}var d={minFont:1,maxFont:9999,preWrapText:!1,lineHeight:1.45,resizable:!0,debounce:!1,fit:!0,ellipsis:!0,center:!1,justify:!1};c.prototype={init:function(){{var c=this.options.minFont>this.options.maxFont;a(this.el)}if(c&&b.console&&console.log("TextTailor error: minFont needs to be smaller than maxFont!"),this.HTML=this.el.innerHTML,!c){var d,e=this;this.options.resizable&&a(b).on("resize",function(){e.options.debounce?(clearTimeout(d),d=setTimeout(function(){e.start()},200)):e.start()}),this.start()}},start:function(){var b=a(this.el);this.el.innerHTML=this.HTML,b.wrapInner("<div/>"),this.wraped=a(this.el.firstChild),this.wraped.css({"line-height":this.options.lineHeight,tranform:"translateZ(0)",height:"auto"}),this.options.preWrapText&&this.wraped.css("white-space","pre-line"),this.maxHeight=b.height(),this.maxWidth=b.width(),this.fit().ellipsis().center().justify()},fit:function(){if(this.options.fit){var a=this,b=this.wraped,c=30,d=0,e=function h(e,f,g){return++d===c?e:e<=a.options.minFont?a.options.minFont:e>=a.options.maxFont?a.options.maxFont:f===g?f:(b.css("fontSize",e),b[0].scrollHeight<a.maxHeight?(b.css("fontSize",e+1),b[0].scrollHeight>=a.maxHeight?e:h(Math.round((g+e)/2),e,g)):(b.css("fontSize",e-1),h(Math.round((f+e)/2),f,e)))},f=Math.round((this.options.maxFont+this.options.minFont)/2);b.css("fontSize",f);var g=e(f,this.options.minFont,this.options.maxFont);b.css("fontSize",g)}return this},ellipsis:function(){if(this.options.ellipsis){var a=this.wraped;if(a.css({overflow:"hidden","text-overflow":"ellipsis"}),a.height()>this.maxHeight){var b=a.html();a.html("O");for(var c=(a.height(),1),d=b.length;d>c;){var e=Math.ceil((c+d)/2);a.html(b.slice(0,e)+"..."),a.height()<=this.maxHeight?c=e:d=e-1}a.html(b.slice(0,c)+"...")}}return this},center:function(){if(this.options.center){var b=a(this.el).css("position");"relative"!==b&&"absolute"!==b&&a(this.el).css("position","relative"),this.wraped.css({position:"absolute",width:this.wraped.width()+"px",left:"0",right:"0",top:"0",bottom:"0",height:this.wraped.height()+"px",margin:"auto"})}return this},justify:function(){return this.options.justify&&this.wraped.css({"text-align":"justify"}),this}},a.fn.textTailor=function(b){return this.each(function(){a.data(this,"TextTailor")||a.data(this,"TextTailor",new c(this,b))})}}(jQuery,window);